# Đảm bảo URL không có dấu / ở cuối chuyển hướng đến URL không có dấu /
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (.+)/$
RewriteRule ^ %1 [L,R=301]

# Xử lý cho trang chủ - đảm bảo cả có và không có dấu / đều hoạt động
RewriteCond %{REQUEST_URI} ^/$
RewriteRule ^(.*)$ index.html [L]

# Loại bỏ các tham số theo dõi Facebook khỏi URL
RewriteCond %{QUERY_STRING} ^(.+&)?(fbcid|fbclid|fb_source|fb_action_ids|fb_action_types)=[^&]*&?(.*)$ [NC]
RewriteRule ^(.*)$ /$1?%2 [R=301,L]

# Đặt canonical header để giúp các mạng xã hội hiểu đúng URL
<IfModule mod_headers.c>
    Header set Link '<https://hoason10.com%{REQUEST_URI}>; rel="canonical"'
</IfModule>
